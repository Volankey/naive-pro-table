<template>
  <div>
    <h1 id="markdown-and-vue-sfc" tabindex="-1">
      <a class="header-anchor" href="#markdown-and-vue-sfc" aria-hidden="true"
        >#</a
      >
      Markdown and Vue SFC
    </h1>
    <p>
      Each Markdown file is first compiled into HTML, and then converted to a
      Vue SFC. In other words, you can write a Markdown file like a Vue SFC:
    </p>
    <ul>
      <li>
        Blocks <code v-pre>&lt;script&gt;</code> and
        <code v-pre>&lt;style&gt;</code> are treated as Vue SFC blocks as they
        are. In other words, they are hoisted from the
        <code v-pre>&lt;template&gt;</code> block to the top-level of SFC.
      </li>
      <li>
        Everything outside <code v-pre>&lt;script&gt;</code> and
        <code v-pre>&lt;style&gt;</code> will be compiled into HTML, and be
        treated as Vue SFC <code v-pre>&lt;template&gt;</code> block.
      </li>
    </ul>
    <div class="custom-container warning">
      <p class="custom-container-title">WARNING</p>
      <p>
        As Vue SFC can contain only one
        <code v-pre>&lt;script&gt;</code> element, you should avoid using more
        than one <code v-pre>&lt;script&gt;</code> in VuePress markdown.
      </p>
    </div>
    <p>Here comes an example:</p>
    <p><strong>Input</strong></p>
    <div class="language-vue ext-vue line-numbers-mode">
      <pre v-pre class="language-vue"><code>_Hello, {{ msg }}_

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RedDiv</span><span class="token punctuation">></span></span>

_Current count is: {{ count }}_

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RedDiv</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>count++<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> <span class="token function-variable function">RedDiv</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>
  <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'red-div'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ctx<span class="token punctuation">.</span>slots<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'Vue in Markdown'</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.red-div</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre>
      <div class="line-numbers" aria-hidden="true">
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
        <div class="line-number"></div>
      </div>
    </div>
    <p><strong>Output</strong></p>
    <p>
      <em>Hello, {{ msg }}</em>
    </p>
    <RedDiv>
      <p>
        <em>Current count is: {{ count }}</em>
      </p>
    </RedDiv>
    <p><button @click="count++">Click Me!</button></p>
  </div>
</template>

<script setup>
import { h, ref } from 'vue'

const RedDiv = (_, ctx) =>
  h(
    'div',
    {
      class: 'red-div'
    },
    ctx.slots.default()
  )
const msg = 'Vue in Markdown'
const count = ref(0)
</script>

<style>
.red-div {
  color: red;
}
</style>
